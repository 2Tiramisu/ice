<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2009-2017 ZeroC, Inc. All rights reserved. -->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <IceVersion>3.7.1</IceVersion>
    <IceIntVersion>30701</IceIntVersion>
    <IceVersionMM>3.7</IceVersionMM>
    <IceSoVersion>37</IceSoVersion>
    <IceHome>$(MSBuildThisFileDirectory)..</IceHome>
    <IceToolsPath>$(IceHome)\tools</IceToolsPath>
    <SliceDir>$(IceHome)\slice</SliceDir>
    <SliceCompilerOutputDir Condition="'$(SliceCompilerOutputDir)' == ''">generated</SliceCompilerOutputDir>
    <EnableDefaultSliceItems Condition="'$(EnableDefaultSliceItems)' == ''">true</EnableDefaultSliceItems>
  </PropertyGroup>

  <Choose>
      <When Condition="$(TargetFramework.StartsWith('net45')) or $(TargetFramework.StartsWith('net46')) or $(TargetFramework.StartsWith('net47'))">
          <PropertyGroup>
              <IceAssembliesDir>$(IceHome)\lib\net45</IceAssembliesDir>
          </PropertyGroup>
      </When>
      <When Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework' and $(TargetFrameworkVersion.StartsWith('v4.5'))">
          <PropertyGroup>
              <IceAssembliesDir>$(IceHome)\lib\net45</IceAssembliesDir>
          </PropertyGroup>
      </When>
      <When Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework' and $(TargetFrameworkVersion.StartsWith('v4.6'))">
          <PropertyGroup>
              <IceAssembliesDir>$(IceHome)\lib\net45</IceAssembliesDir>
          </PropertyGroup>
      </When>
      <When Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework' and $(TargetFrameworkVersion.StartsWith('v4.7'))">
          <PropertyGroup>
              <IceAssembliesDir>$(IceHome)\lib\net45</IceAssembliesDir>
          </PropertyGroup>
      </When>
      <Otherwise>
          <PropertyGroup>
              <IceAssembliesDir>$(IceHome)\lib\netstandard2.0</IceAssembliesDir>
          </PropertyGroup>
      </Otherwise>
  </Choose>

  <Choose>
    <When Condition="'$(OS)' == 'Windows_NT'">
      <PropertyGroup>
        <SliceCompiler Condition="'$(SliceCompiler)' == ''">$(IceHome)\tools\slice2cs.exe</SliceCompiler>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <SliceCompiler Condition="'$(SliceCompiler)' == '' and Exists('$(ICE_HOME)/bin/slice2cs')">$(ICE_HOME)/bin/slice2cs</SliceCompiler>
        <SliceCompiler Condition="'$(SliceCompiler)' == '' and Exists('/usr/bin/slice2cs')">/usr/bin/slice2cs</SliceCompiler>
      </PropertyGroup>
    </Otherwise>
  </Choose>

   <ItemGroup Condition="'$(EnableDefaultItems)' == 'true'">
       <Slice Condition="'$(EnableDefaultSliceItems)' == 'true'" Include="**/*.ice"/>
   </ItemGroup>

</Project>
